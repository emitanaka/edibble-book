<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The Grammar of Experimental Designs - 14&nbsp; Getting started</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./cookbook.html" rel="next">
<link href="./toolbox.html" rel="prev">
<link href="./figures/logos/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZBRNTDT9WG"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZBRNTDT9WG', { 'anonymize_ip': true});
</script>
<link rel="stylesheet" href="./assets/fontawesome-free-6.1.1-web/css/font-awesome.min.css">
<script defer="" src="./assets/fontawesome-free-6.1.1-web/js/all.min.js"></script>
<script defer="" data-domain="emitanaka.org/edibble-book" src="https://plausible.io/js/plausible.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./toolbox.html">Toolbox</a></li><li class="breadcrumb-item"><a href="./toolbox-edibble.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Getting started</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./figures/logos/edibble-website-logo-blue.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The Grammar of Experimental Designs</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/emitanaka/edibble-book" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-terminology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Terminology</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Principles</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-choices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Choices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-diagnosis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Diagnosis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./grammar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grammar</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grammar-ed.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grammar-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./grammar-edvis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Visualise</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./practice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practice</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./practice-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Management</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./practice-context.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Context</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./practice-teaching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Teaching</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./practice-guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Guides</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./toolbox.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Toolbox</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./toolbox-edibble.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Getting started</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./cookbook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cookbook</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-crd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Completely randomised design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-rcbd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Randomised complete block design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-lsd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Latin square designs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-factorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Factorial design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-bibd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Balanced incomplete block design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-split.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Split-plot design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cookbook-strip.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Strip-plot design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setting-the-experimental-structure-and-context" id="toc-setting-the-experimental-structure-and-context" class="nav-link active" data-scroll-target="#setting-the-experimental-structure-and-context"><span class="header-section-number">14.1</span> Setting the experimental structure and context</a>
  <ul class="collapse">
  <li><a href="#a-viable-experimental-design" id="toc-a-viable-experimental-design" class="nav-link" data-scroll-target="#a-viable-experimental-design"><span class="header-section-number">14.1.1</span> A viable experimental design</a></li>
  <li><a href="#understanding-the-experimental-context" id="toc-understanding-the-experimental-context" class="nav-link" data-scroll-target="#understanding-the-experimental-context"><span class="header-section-number">14.1.2</span> Understanding the experimental context</a></li>
  <li><a href="#fitting-a-variety-of-mental-mode" id="toc-fitting-a-variety-of-mental-mode" class="nav-link" data-scroll-target="#fitting-a-variety-of-mental-mode"><span class="header-section-number">14.1.3</span> Fitting a variety of mental mode</a></li>
  </ul></li>
  <li><a href="#map-trts" id="toc-map-trts" class="nav-link" data-scroll-target="#map-trts"><span class="header-section-number">14.2</span> Mapping treatment to units</a>
  <ul class="collapse">
  <li><a href="#treatment-allotment" id="toc-treatment-allotment" class="nav-link" data-scroll-target="#treatment-allotment"><span class="header-section-number">14.2.1</span> Treatment allotment</a></li>
  </ul></li>
  <li><a href="#setting-records-with-expectations" id="toc-setting-records-with-expectations" class="nav-link" data-scroll-target="#setting-records-with-expectations"><span class="header-section-number">14.3</span> Setting records with expectations</a></li>
  <li><a href="#simulate" id="toc-simulate" class="nav-link" data-scroll-target="#simulate"><span class="header-section-number">14.4</span> Simulating records</a></li>
  <li><a href="#export" id="toc-export" class="nav-link" data-scroll-target="#export"><span class="header-section-number">14.5</span> Exporting the design</a></li>
  <li><a href="#aes-custom" id="toc-aes-custom" class="nav-link" data-scroll-target="#aes-custom"><span class="header-section-number">14.6</span> Aesthetic customisations</a></li>
  <li><a href="#visualisation" id="toc-visualisation" class="nav-link" data-scroll-target="#visualisation"><span class="header-section-number">14.7</span> Visualisation</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">14.8</span> Examples</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/emitanaka/edibble-book/edit/master/toolbox-edibble.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/emitanaka/edibble-book/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-edibble" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Getting started</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
üìñ Status of the book
</div>
</div>
<div class="callout-body-container callout-body">
<p>Hi there! This book is a work-in-progress. You may like to come back later when it‚Äôs closer to a complete state. If you would like to raise issues or leave feedback, please feel to do this:</p>
<ul>
<li>at <a href="https://github.com/emitanaka/edibble-book/issues">GitHub issues</a>,</li>
<li>email me at <a href="mailto:emi.tanaka@anu.edu.au">emi.tanaka@anu.edu.au</a>, or</li>
<li>leave it anonymously in the form <a href="https://docs.google.com/forms/d/e/1FAIpQLSeEkCGzHDaeQyWSheG3QPuVbO9_eNR5Z0Z1cNIf_zsBCH-vYQ/viewform?usp=sf_link">here</a>.</li>
</ul>
</div>
</div>
<p>The experimental planning in this book is supported by the <code>edibble</code> R-package and its extensions. The <code>edibble</code> system is based on the grammar of experimental designs in <span class="quarto-unresolved-ref">?sec-grammar</span>. To get started with using the system, you need to first load the package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(edibble)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="setting-the-experimental-structure-and-context" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="setting-the-experimental-structure-and-context"><span class="header-section-number">14.1</span> Setting the experimental structure and context</h2>
<p>In the <code>edibble</code> system, an experiment design is built step-by-step. In the first step, you start with initialising the design by using the <code>design()</code> where the user can supply an optional title of the experiment. All subsequent steps are best specified after using the pipe operator (<code>%&gt;%</code>) re-exported from the <code>magrittr</code> package or the native pipe operator (<code>|&gt;</code>) available from R version 4.1 onwards. For example, below we carry out the following steps:</p>
<ol type="1">
<li>initiate an experiment called ‚ÄúMy first experiment‚Äù via <code>design()</code>;</li>
<li>set 24 pots with <code>set_units()</code>; and then</li>
<li>set treatments with 3 levels: 2 bacterial strains (PM398 and ZNP1) and no innoculation with <code>set_trts()</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mydesign1 <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"My first experiment"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pot =</span> <span class="dv">24</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">innoculation =</span> <span class="fu">c</span>(<span class="st">"PM398"</span>, <span class="st">"ZNP1"</span>, <span class="st">"none"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>These steps create and modify a so-called ‚Äúedibble design‚Äù (<code>edbl_design</code>) object that is used to represent an <em>intermediate construct of an experimental design</em>. The arguments in the functions <code>set_units()</code> and <code>set_trts()</code> employ the convention that the left hand side (LHS) is the name of the factor and the input on the right hand side (RHS) defines the levels. If the RHS is a single integer then it‚Äôs assumed to be the number of levels and if it‚Äôs a vector then it‚Äôs the name of the levels.</p>
<p>The print out of this object, as seen below, is displayed like a tree summarising the variables defined thus far.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mydesign1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>My first experiment
‚îú‚îÄpot (24 levels)
‚îî‚îÄinnoculation (3 levels)</code></pre>
</div>
</div>
<p>If you view the print out in the terminal or console, you will actually see that text are color coded so it‚Äôs easier to distinguish between the type of variables (e.g.&nbsp;unit or treatment). The above print out in a terminal will be viewed like below. These colors are customisable as discussed in Section @ref(aes-custom).</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="figures/terminal-output-for-edbl-graph.svg" class="img-fluid"></p>
</div>
</div>
<p>The argument names in <code>set_units</code> and <code>set_trts</code> are not fixed, so you could easily change the name of the units or treatment to something more meaningful. Below we have another experiment which has a <em>statistically equivalent experimental structure</em> as the previous experiment (24 units and 3 levels of treatment), but it ‚Äúreads‚Äù as a different experimental context ‚Äì a typical user will realise that the experimental units are pigs and treatments are diet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mydesign2 <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"My second experiment"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pig =</span> <span class="dv">24</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span>, <span class="st">"low-fat"</span>, <span class="st">"standard"</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>mydesign2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>My second experiment
‚îú‚îÄpig (24 levels)
‚îî‚îÄdiet (3 levels)</code></pre>
</div>
</div>
<p>You can define more than one unit factor or treatment factor. For example below, it reads as that there are: 3 pens (named ‚ÄúNorth‚Äù, ‚ÄúShade‚Äù and ‚ÄúMeadow‚Äù), 18 pigs, 3 type of diets and 2 types of supplement given at a frequency of either daily or weekly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">design</span>(<span class="st">"My experiment with multiple factors"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pen =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Shade"</span>, <span class="st">"Meadow"</span>),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">pig =</span> <span class="dv">18</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span>, <span class="st">"low-fat"</span>, <span class="st">"standard"</span>),</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">supplement =</span> <span class="dv">2</span>, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>           <span class="co"># frequency of supplements:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">frequency =</span> <span class="fu">c</span>(<span class="st">"daily"</span>, <span class="st">"weekly"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>My experiment with multiple factors
‚îú‚îÄpen (3 levels)
‚îú‚îÄpig (18 levels)
‚îú‚îÄdiet (3 levels)
‚îú‚îÄsupplement (2 levels)
‚îî‚îÄfrequency (2 levels)</code></pre>
</div>
</div>
<p>The unit and treatment factors do not need to be defined in one call. The ordering of the functions is commutative where the factor is not dependent directly on another factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">design</span>(<span class="st">"My experiment with multiple factors"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pen =</span> <span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"Shade"</span>, <span class="st">"Meadow"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span>, <span class="st">"low-fat"</span>, <span class="st">"standard"</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">supplement =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># frequency of supplements</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">frequency =</span> <span class="fu">c</span>(<span class="st">"daily"</span>, <span class="st">"weekly"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pig =</span> <span class="dv">18</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>My experiment with multiple factors
‚îú‚îÄpen (3 levels)
‚îú‚îÄdiet (3 levels)
‚îú‚îÄsupplement (2 levels)
‚îú‚îÄfrequency (2 levels)
‚îî‚îÄpig (18 levels)</code></pre>
</div>
</div>
<section id="a-viable-experimental-design" class="level3" data-number="14.1.1">
<h3 data-number="14.1.1" class="anchored" data-anchor-id="a-viable-experimental-design"><span class="header-section-number">14.1.1</span> A viable experimental design</h3>
<div class="info callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>A viable experimental design is only specified if the relationship between the variables can be reconciled to a single observational unit.</p>
</div>
</div>
</div>
<p>For example below</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">design</span>(<span class="st">"An invalid unit structure"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pen =</span> <span class="dv">6</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">pig =</span> <span class="dv">18</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">serve_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># An invalid unit structure 
# An edibble: 0 x 2
# ‚Ñπ 2 variables: pen &lt;unit(6)&gt;, pig &lt;unit(18)&gt;</code></pre>
</div>
</div>
</section>
<section id="understanding-the-experimental-context" class="level3" data-number="14.1.2">
<h3 data-number="14.1.2" class="anchored" data-anchor-id="understanding-the-experimental-context"><span class="header-section-number">14.1.2</span> Understanding the experimental context</h3>
</section>
<section id="fitting-a-variety-of-mental-mode" class="level3" data-number="14.1.3">
<h3 data-number="14.1.3" class="anchored" data-anchor-id="fitting-a-variety-of-mental-mode"><span class="header-section-number">14.1.3</span> Fitting a variety of mental mode</h3>
</section>
</section>
<section id="map-trts" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="map-trts"><span class="header-section-number">14.2</span> Mapping treatment to units</h2>
<p>The above code creates an object that represents an intermediate construct of an experimental design. To complete the specification of a minimum experimental design, we still need to specify:</p>
<ul>
<li>the mapping of the treatments to units, which is achieved using <code>allot_trts()</code>, and</li>
<li>how the treatments are actually allocated to units via <code>assign_trts()</code>.</li>
</ul>
<p>These step may feel redundant in experiments where there is exactly one unit factor and one treatment factor but it‚Äôs required for further generalisation to other experimental structures. In addition, it serves to re-enforce the specific actions to the user.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"My first animal experiment"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pig =</span> <span class="dv">24</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span>, <span class="st">"low-fat"</span>, <span class="st">"standard"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_trts</span>(diet <span class="sc">~</span> pig) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign_trts</span>(<span class="at">order =</span> <span class="st">"random"</span>, <span class="at">seed =</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once a minimum viable experimental design has been specified, then you can generate the experimental design table (or tibble) called <code>edibble</code> by parsing the object to <code>serve_table()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">serve_table</span>(des)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># My first animal experiment 
# An edibble: 24 x 2
          pig     diet
   &lt;unit(24)&gt; &lt;trt(3)&gt;
 1      pig1  low-fat 
 2      pig2  standard
 3      pig3  low-fat 
 4      pig4  standard
 5      pig5  low-fat 
 6      pig6  low-fat 
 7      pig7  standard
 8      pig8  low-fat 
 9      pig9  high-fat
10      pig10 high-fat
# ‚Ñπ 14 more rows</code></pre>
</div>
</div>
<section id="treatment-allotment" class="level3" data-number="14.2.1">
<h3 data-number="14.2.1" class="anchored" data-anchor-id="treatment-allotment"><span class="header-section-number">14.2.1</span> Treatment allotment</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>diet_design <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">design</span>(<span class="st">"A valid nested design"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_units</span>(<span class="at">pen =</span> <span class="dv">6</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">pig =</span> <span class="fu">nested_in</span>(pen, <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_trts</span>(<span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span>, <span class="st">"low-fat"</span>, <span class="st">"standard"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">allot_trts</span>(...) <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">assign_trts</span>(<span class="at">order =</span> <span class="st">"systematic"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">serve_table</span>()</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">diet_design</span>(diet <span class="sc">~</span> pig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A valid nested design 
# An edibble: 18 x 3
         pen        pig     diet
   &lt;unit(6)&gt; &lt;unit(18)&gt; &lt;trt(3)&gt;
 1      pen1      pig1  high-fat
 2      pen1      pig2  low-fat 
 3      pen1      pig3  standard
 4      pen2      pig4  high-fat
 5      pen2      pig5  low-fat 
 6      pen2      pig6  standard
 7      pen3      pig7  high-fat
 8      pen3      pig8  low-fat 
 9      pen3      pig9  standard
10      pen4      pig10 high-fat
11      pen4      pig11 low-fat 
12      pen4      pig12 standard
13      pen5      pig13 high-fat
14      pen5      pig14 low-fat 
15      pen5      pig15 standard
16      pen6      pig16 high-fat
17      pen6      pig17 low-fat 
18      pen6      pig18 standard</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diet_design</span>(diet <span class="sc">~</span> pen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A valid nested design 
# An edibble: 18 x 3
         pen        pig     diet
   &lt;unit(6)&gt; &lt;unit(18)&gt; &lt;trt(3)&gt;
 1      pen1      pig1  high-fat
 2      pen1      pig2  high-fat
 3      pen1      pig3  high-fat
 4      pen2      pig4  low-fat 
 5      pen2      pig5  low-fat 
 6      pen2      pig6  low-fat 
 7      pen3      pig7  standard
 8      pen3      pig8  standard
 9      pen3      pig9  standard
10      pen4      pig10 high-fat
11      pen4      pig11 high-fat
12      pen4      pig12 high-fat
13      pen5      pig13 low-fat 
14      pen5      pig14 low-fat 
15      pen5      pig15 low-fat 
16      pen6      pig16 standard
17      pen6      pig17 standard
18      pen6      pig18 standard</code></pre>
</div>
</div>
</section>
</section>
<section id="setting-records-with-expectations" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="setting-records-with-expectations"><span class="header-section-number">14.3</span> Setting records with expectations</h2>
<p>The term ‚Äúrecords‚Äù, often abbreviated as <code>rcrd</code> in the <code>edibble</code> system, refers to any observational variables, including response variables. Setting records is a way to describe the <em>intent</em> of the observations that you will collect in the experiment. All records must be made on a unit. The primary way to set the record is using <code>set_rcrds()</code> where the LHS is the factor name of the record and the RHS is the unit factor on which the record will be measured. The LHS of the input in <code>set_rcrds()</code> follow the same pattern as <code>set_units()</code> and <code>set_trts()</code> as the LHS is the name of the new factor. In the example below, we are measuring <code>weight</code> and <code>sex</code> of the <code>pig</code> and recording the <code>manager</code> of each <code>pen</code>. In this example there are only 6 pens, therefore there should be only a maximum of 6 managers recorded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>desr <span class="ot">&lt;-</span> <span class="fu">diet_design</span>(diet <span class="sc">~</span> pen) <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_rcrds</span>(<span class="at">weight =</span> pig,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">sex =</span> pig,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">manager =</span> pen) </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>desr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A valid nested design 
# An edibble: 18 x 6
         pen        pig     diet weight    sex manager
   &lt;unit(6)&gt; &lt;unit(18)&gt; &lt;trt(3)&gt; &lt;rcrd&gt; &lt;rcrd&gt;  &lt;rcrd&gt;
 1      pen1      pig1  high-fat      o      o       o
 2      pen1      pig2  high-fat      o      o       x
 3      pen1      pig3  high-fat      o      o       x
 4      pen2      pig4  low-fat       o      o       o
 5      pen2      pig5  low-fat       o      o       x
 6      pen2      pig6  low-fat       o      o       x
 7      pen3      pig7  standard      o      o       o
 8      pen3      pig8  standard      o      o       x
 9      pen3      pig9  standard      o      o       x
10      pen4      pig10 high-fat      o      o       o
11      pen4      pig11 high-fat      o      o       x
12      pen4      pig12 high-fat      o      o       x
13      pen5      pig13 low-fat       o      o       o
14      pen5      pig14 low-fat       o      o       x
15      pen5      pig15 low-fat       o      o       x
16      pen6      pig16 standard      o      o       o
17      pen6      pig17 standard      o      o       x
18      pen6      pig18 standard      o      o       x</code></pre>
</div>
</div>
<p>Another equivalent way to set the record is using <code>set_rcrds_of()</code>. The format of the input is such that the unit factors are on the LHS and the RHS are character vectors of new record factor names. The reason that names are set as characters is because the factors in the RHS do not yet exist. In contrast, the RHS of the input in <code>set_rcrds()</code> is unquoted because those factors exist. The suffix <code>_of</code> in the function name is purposely chosen to signal that the pattern for the LHS no longer follows that of <code>set_rcrds()</code>, <code>set_trts()</code> and <code>set_units()</code> where the LHS is always a new factor name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diet_design</span>(diet <span class="sc">~</span> pen) <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_rcrds_of</span>(<span class="at">pig =</span> <span class="fu">c</span>(<span class="st">"weight"</span>, <span class="st">"sex"</span>),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">pen =</span> <span class="st">"manager"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You may choose to also set expecations of the record. For example, we assert below that the weight of a grown pig must be a minimum of 15 kg.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>desre <span class="ot">&lt;-</span> desr <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expect_rcrds</span>(weight <span class="sc">&gt;</span> <span class="dv">15</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">factor</span>(sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You might see that it is good principles to be explicit about the records but you may not feel motivated for such verbose coding. There are downstream benefits for this as explained in Sections @ref(simulate) and @ref(export).</p>
</section>
<section id="simulate" class="level2" data-number="14.4">
<h2 data-number="14.4" class="anchored" data-anchor-id="simulate"><span class="header-section-number">14.4</span> Simulating records</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> desre <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">simulate_rcrds</span>(<span class="at">weight =</span> <span class="fu">sim_normal</span>(<span class="sc">~</span>diet <span class="sc">+</span> pen <span class="sc">+</span> pig, <span class="at">sd =</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">params</span>(<span class="st">"mean"</span>, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">diet =</span> <span class="fu">c</span>(<span class="st">"high-fat"</span> <span class="ot">=</span> <span class="dv">300</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"low-fat"</span> <span class="ot">=</span> <span class="dv">50</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">"standard"</span> <span class="ot">=</span> <span class="dv">150</span>),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pen =</span> <span class="fu">c</span>(<span class="st">"pen4"</span> <span class="ot">=</span> <span class="sc">-</span><span class="dv">270</span>),</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">pig =</span> <span class="fu">rnorm</span>(<span class="dv">18</span>)),</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">manager =</span> <span class="fu">sim_form</span>(<span class="sc">~</span>pen) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">params</span>(<span class="at">pen =</span> <span class="fu">sample</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Mary"</span>, <span class="st">"Jane"</span>), <span class="dv">2</span>))),</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">.seed =</span> <span class="dv">1</span>, <span class="at">.censor =</span> <span class="cn">NA</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>dat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat, <span class="fu">aes</span>(pen, weight, <span class="at">color =</span> diet)) <span class="sc">+</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="export" class="level2" data-number="14.5">
<h2 data-number="14.5" class="anchored" data-anchor-id="export"><span class="header-section-number">14.5</span> Exporting the design</h2>
</section>
<section id="aes-custom" class="level2" data-number="14.6">
<h2 data-number="14.6" class="anchored" data-anchor-id="aes-custom"><span class="header-section-number">14.6</span> Aesthetic customisations</h2>
<p>The edibble system offers you many levels of aesthetic customisations. These customisation are mostly frivolous and serve as means for users to customise elements visually to their liking. The level of aethetic customisation in the edibble system is probably of little value in the grand aim of constructing an experimental design, but if a user finds the developer‚Äôs default choice is not to their liking, at least they have the ability to modify it.</p>
</section>
<section id="visualisation" class="level2" data-number="14.7">
<h2 data-number="14.7" class="anchored" data-anchor-id="visualisation"><span class="header-section-number">14.7</span> Visualisation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(deggust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="examples" class="level2" data-number="14.8">
<h2 data-number="14.8" class="anchored" data-anchor-id="examples"><span class="header-section-number">14.8</span> Examples</h2>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Exercise 8.5</strong></p>
<p>In a biotechnology experiment, plants were grown in 90 pots. Five different quantities of potassium were randomized to the pots, so that each quantity was applied to the soil in 18 pots. After each of 15, 30 and 45 days, one plant was randomly chosen from each pot and removed; nine small pieces were cut from it to be used for tissue culture. Three different levels of nutrition were each applied to three of the pieces of each plant removed at each time. After a certain further length of time, the number of plantlets growing in each piece of tissue was counted.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">design</span>(<span class="st">"Bailey (2008) Exercise 8.5"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">pot =</span> <span class="dv">90</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">plant =</span> <span class="fu">nested_in</span>(pot, <span class="dv">3</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">piece =</span> <span class="fu">nested_in</span>(plant, <span class="dv">9</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">pottasium =</span> <span class="fu">c</span>(<span class="st">"q1"</span>, <span class="st">"q2"</span>, <span class="st">"q3"</span>, <span class="st">"q4"</span>, <span class="st">"q5"</span>), </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">nutrition =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_trts</span>(pottasium <span class="sc">~</span> pot,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>             nutrition <span class="sc">~</span> piece) <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign_trts</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_rcrds</span>(<span class="at">plantlets =</span> piece) <span class="sc">%&gt;%</span> </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">serve_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bailey (2008) Exercise 8.5 
# An edibble: 2,430 x 6
          pot       plant      piece pottasium  nutrition plantlets
   &lt;unit(90)&gt; &lt;unit(270)&gt; &lt;unit(2k)&gt;  &lt;trt(5)&gt;   &lt;trt(3)&gt;    &lt;rcrd&gt;
 1       pot1      plant1    piece1         q2 nutrition2         o
 2       pot1      plant1    piece2         q2 nutrition1         o
 3       pot1      plant1    piece3         q2 nutrition3         o
 4       pot1      plant1    piece4         q2 nutrition3         o
 5       pot1      plant1    piece5         q2 nutrition2         o
 6       pot1      plant1    piece6         q2 nutrition3         o
 7       pot1      plant1    piece7         q2 nutrition1         o
 8       pot1      plant1    piece8         q2 nutrition1         o
 9       pot1      plant1    piece9         q2 nutrition2         o
10       pot1      plant2    piece10        q2 nutrition3         o
# ‚Ñπ 2,420 more rows</code></pre>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Exercise 9.6</strong></p>
<p>A horticultural research station intends to investigate the effects of two treatment factors on the total weight of apples produced from apple trees. One treatment factor is the method of thinning; that is, removing fruitlets at an early stage of development so that those remaining will be able to grow larger. There are five methods of thinning, coded as A,B,C,D,E. The second treatment factor is the type of grass to grow around the base of the tree to prevent the growth of weeds. There are five types of grass, coded as a,b,c,d,e. It is assumed that there is no interaction between method of thinning and type of grass. There are 25 trees available for the experiment. They are arranged in a 5√ó5 rectangle. Construct a suitable design.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"Bailey (2008) Exercise 9.6"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">thinning =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>),</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">grass =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">row =</span> <span class="dv">5</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">col =</span> <span class="dv">5</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">tree =</span> <span class="fu">crossed_by</span>(row, col)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_rcrds</span>(<span class="at">apple_weight_total =</span> tree) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_table</span>(thinning <span class="sc">~</span> tree,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>              grass <span class="sc">~</span> tree)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">anatomy</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

Summary table of the decomposition for unit &amp; trt (based on adjusted quantities)

 Source.unit df1 Source.trt     df2 aefficiency eefficiency order
 row           4 thinning#grass   4      0.5625      0.5000     2
 col           4 thinning#grass   4      0.5625      0.5000     2
 tree         16 thinning         4      1.0000      1.0000     1
                 grass            4      1.0000      1.0000     1
                 thinning#grass   8      0.2500      0.1000     2

Table of information (partially) aliased with previous sources derived from the same formula

 Source df Alias                    In  aefficiency eefficiency order
 grass  1  thinning                 trt      0.6400      0.6400     1
 grass  4  ## Information remaining trt      0.6923      0.3600     2

The design is not orthogonal</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="figures/bailey-ex-9-6-1.png" class="img-fluid" width="384"></p>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Exercise 9.6</strong></p>
<p>A road safety organization wishes to compare four makes of car tyre. The organization has four test cars and four test drivers. One working day is needed to fit new tyres to a car, take it for an exhaustive test-drive, take relevant measurements on tyre treads, record all details of the test-drive, and prepare the car for the next session. The organization has only one week in which to perform its tests. To keep each car properly balanced, the organization has decided that all four tyres on a car at any one time should be of the same make. Construct a suitable design for this trial.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"Tyre test"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">car =</span> <span class="dv">4</span>,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">driver =</span> <span class="dv">4</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">day =</span> <span class="dv">5</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">test_drive =</span> <span class="fu">crossed_by</span>(day, car, driver),</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>            <span class="co">#tyre = nested_in(test_drive, 4)</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">%&gt;%</span> </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">make =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#set_rcrds(measure = tyre) %&gt;% </span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_table</span>(make <span class="sc">~</span> test_drive)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="fu">anatomy</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

Summary table of the decomposition for unit &amp; trt

 Source.unit df1 Source.trt df2 aefficiency eefficiency order
 car           3                                             
 driver        3                                             
 day           4                                             
 test_drive   69 make         3      1.0000      1.0000     1
                 Residual    66                              </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="figures/tyre-example-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Example 10.19</strong></p>
<p>A manufacturer of household appliances wants to find the best combination of wash temperature and drying temperature to produce unwrinkled cotton sheets at the end of the laundry session. He wants to compare four different wash temperatures and three different drying temperatures. He uses eight similar washing machines and six similar dryers. First, 48 cotton sheets are randomly allocated to the washing machines, six per machine. The wash temperatures are randomly allocated to the washing machines so that two machines are run at each temperature. After the wash, the six sheets in each machine are randomly allocated to the dryers, one per dryer. Then the drying temperatures are randomly allocated to the dryers so that two machines are run at each temperature. After the drying, all 48 sheets are scored by experts for how wrinkled they are.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"Bailey (2008) Example 10.19"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">wash_temp =</span> <span class="dv">4</span>,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">dry_temp =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">washer =</span> <span class="dv">8</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">dryer =</span> <span class="dv">6</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">sheet =</span> <span class="dv">48</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_units</span>(washer <span class="sc">~</span> sheet,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>              dryer <span class="sc">~</span> washer<span class="sc">/</span>sheet) <span class="sc">%&gt;%</span> </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_trts</span>(wash_temp <span class="sc">~</span> washer,</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>              dry_temp <span class="sc">~</span> dryer) <span class="sc">%&gt;%</span> </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign_trts</span>(<span class="st">"random"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assign_units</span>(<span class="st">"random"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_rcrds</span>(<span class="at">score =</span> sheet) <span class="sc">%&gt;%</span> </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">serve_table</span>()</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="fu">anatomy</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

Summary table of the decomposition for unit &amp; trt

 Source.unit df1 Source.trt         df2 aefficiency eefficiency order
 washer        7 wash_temp            3      1.0000      1.0000     1
                 Residual             4                              
 dryer         5 dry_temp             2      1.0000      1.0000     1
                 Residual             3                              
 sheet        35 wash_temp#dry_temp   6      1.0000      1.0000     1
                 Residual            29                              </code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="figures/washer-example-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Example 10.20</strong></p>
<p>An agronomy institute in Brazil conducted a factorial experiment on beans. The treatment factors were cultivar (there were three cultivars), seeding (either conventional or with no tillage), and molybdenum (either applied or not). The experimental area was divided into four blocks. Each block was a 3√ó4 rectangle. The three rows were called strips; cultivars were applied to these. The four columns, which were called quarters, were grouped into two halves. The different seeding methods were used in the two halves of each block, and the Mo (molybdenum) was applied to one quarter in each half.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"Bailey (2008) Example 10.20"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">cultivar =</span> <span class="dv">3</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">seeding =</span> <span class="fu">c</span>(<span class="st">"conventional"</span>, <span class="st">"no tillage"</span>),</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">molybdenum =</span> <span class="fu">c</span>(<span class="st">"applied"</span>, <span class="st">"none"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">block =</span> <span class="dv">4</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">strip =</span> <span class="fu">nested_in</span>(block, <span class="dv">3</span>),</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">half =</span> <span class="fu">nested_in</span>(block, <span class="dv">2</span>),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">quarter =</span> <span class="fu">nested_in</span>(half, <span class="dv">2</span>),</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">plot =</span> <span class="fu">nested_in</span>(block, <span class="fu">crossed_by</span>(strip, quarter))) <span class="sc">%&gt;%</span> </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_table</span>(cultivar <span class="sc">~</span> strip,</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>              seeding <span class="sc">~</span> half,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>              molybdenum <span class="sc">~</span> quarter) </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Bailey (2008) Example 10.20 
# An edibble: 48 x 8
    cultivar      seeding molybdenum     block      strip      half
    &lt;trt(3)&gt;     &lt;trt(2)&gt;   &lt;trt(2)&gt; &lt;unit(4)&gt; &lt;unit(12)&gt; &lt;unit(8)&gt;
 1 cultivar3 conventional    none       block1     strip1     half1
 2 cultivar2 conventional    none       block1     strip2     half1
 3 cultivar1 conventional    none       block1     strip3     half1
 4 cultivar3 conventional    applied    block1     strip1     half1
 5 cultivar2 conventional    applied    block1     strip2     half1
 6 cultivar1 conventional    applied    block1     strip3     half1
 7 cultivar3 no tillage      none       block1     strip1     half2
 8 cultivar2 no tillage      none       block1     strip2     half2
 9 cultivar1 no tillage      none       block1     strip3     half2
10 cultivar3 no tillage      applied    block1     strip1     half2
# ‚Ñπ 38 more rows
# ‚Ñπ 2 more variables: quarter &lt;unit(16)&gt;, plot &lt;unit(48)&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anatomy</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in pstructure.formula(formulae[[1]], keep.order = keep.order, grandMean
= grandMean, : block:half is aliased with previous terms in the formula and has
been removed</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Summary table of the decomposition for unit &amp; trt (based on adjusted quantities)

 Source.unit         df1 Source.trt                  df2 aefficiency
 block                 3                                            
 half[block]           4 seeding                       1      1.0000
                         Residual                      3            
 strip[block]          8 cultivar                      2      1.0000
                         Residual                      6            
 quarter[block:half]   8 molybdenum                    1      1.0000
                         seeding#molybdenum            1      1.0000
                         Residual                      6            
 plot[block]          24 cultivar#seeding              2      1.0000
                         cultivar#molybdenum           2      1.0000
                         cultivar#seeding#molybdenum   2      1.0000
                         Residual                     18            
 eefficiency order
                  
      1.0000     1
                  
      1.0000     1
                  
      1.0000     1
      1.0000     1
                  
      1.0000     1
      1.0000     1
      1.0000     1
                  

Table of information (partially) aliased with previous sources derived from the same formula

 Source      df Alias       In   aefficiency eefficiency order
 half[block] 4  half[block] unit      1.0000      1.0000     1
 half[block] 0  ## Aliased  unit      1.0000      1.0000     1</code></pre>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Exercise 10.5</strong></p>
<p>In an experiment into the digestibility of stubble, four feed treatments are to be applied to sheep. There are 16 sheep, in four rooms of four animals each. There are four test periods of four weeks each, separated by two-week recovery periods. Each sheep is to be fed all treatments, one in each test period. During the recovery periods all animals will receive their usual feed, so that they will return to normal conditions before being subjected to a new treatment.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>des <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"Bailey (2008) Exercise 10.5"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">feed =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">room =</span> <span class="dv">4</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sheep =</span> <span class="fu">nested_in</span>(room, <span class="dv">4</span>),</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">period =</span> <span class="dv">4</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">unit =</span> <span class="fu">crossed_by</span>(period, sheep)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_table</span>(feed <span class="sc">~</span> unit)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co"># anatomy(des)</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(des)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="figures/bailey-10.5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="note callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><span class="citation" data-cites="Bailey2008-gw">Bailey (<a href="references.html#ref-Bailey2008-gw" role="doc-biblioref">2008</a>)</span> Exercise 10.6</strong></p>
<p>An experiment was carried out to find out if so-called ‚Äònon-herbicidal‚Äô pesticides affect photosynthesis in plants. Six pesticides were compared: diuron, carbofuran, chlorpyrifos, tributyltin chloride, phorate and fonofos. Each of these was dissolved in water at five different concentrations. In addition, plain water was used as a control treatment. Two petri dishes were used for each treatment. Each petri dish was filled with pesticide solution or water. Five freshly cut leaves from mung beans were floated on the surface ofthe solution in each dish. After two hours, the chlorophyll fluorescence of each leaf was measured.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">design</span>(<span class="st">"Bailey (2008) Exercise 10.6"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">pesticide =</span> <span class="fu">c</span>(<span class="st">"diuron"</span>, <span class="st">"carbofuran"</span>, <span class="st">"chlorpyrifos"</span>, <span class="st">"tributyltin chloride"</span>, </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"phorate"</span>, <span class="st">"fonofos"</span>),</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">concentration =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trts</span>(<span class="at">pesticide =</span> <span class="st">"none"</span>, <span class="at">concentration =</span> <span class="cn">NA</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">petri =</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">ntrts</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># emylyn's design</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(edibble)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>des1 <span class="ot">&lt;-</span> <span class="fu">design</span>(<span class="st">"sensory evaluation"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_units</span>(<span class="at">day =</span> <span class="dv">4</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">consumer =</span> <span class="fu">nested_in</span>(day, <span class="dv">42</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_trts</span>(<span class="at">cover_story =</span> <span class="fu">c</span>(<span class="st">"yes"</span>, <span class="st">"no"</span>),</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">test_half =</span> <span class="fu">c</span>(<span class="st">"triangle"</span>, <span class="st">"paired"</span>),</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">test_first =</span> <span class="fu">c</span>(<span class="st">"triangle/paired"</span>, <span class="st">"monadic"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">allot_table</span>(test_half<span class="sc">:</span>cover_story <span class="sc">~</span> day,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                         test_first <span class="sc">~</span> consumer, </span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">order =</span> <span class="fu">c</span>(<span class="st">"systematic"</span>, <span class="st">"random"</span>))</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>des1 <span class="sc">%&gt;%</span> </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(test_half <span class="sc">==</span> <span class="st">"triangle"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(day, consumer) <span class="sc">%&gt;%</span> </span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do the next design</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">restart_design</span>(<span class="st">"triangle test"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_units</span>(day, consumer) <span class="sc">%&gt;%</span> </span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">allot_units</span>(consumer <span class="sc">~</span> <span class="fu">nested_in</span>(day)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># finished described relationship - new design variables</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">edbl_design</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_units</span>(<span class="at">test =</span> <span class="fu">nested_in</span>(consumer, <span class="dv">2</span>), </span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>              <span class="at">product =</span> <span class="fu">nested_in</span>(test, <span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set_trts</span>(<span class="at">spiked =</span> <span class="fu">c</span>(<span class="st">"1/3"</span>, <span class="st">"2/3"</span>),</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>             <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"XXO"</span>, <span class="st">"XOX"</span>, <span class="st">"OXX"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">allot_table</span>(spiked <span class="sc">~</span> test, </span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>                pattern <span class="sc">~</span> product)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-Bailey2008-gw" class="csl-entry" role="listitem">
Bailey, Rosemary. 2008. <em>Design of Comparative Experiments</em>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./toolbox.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Toolbox</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./cookbook.html" class="pagination-link">
        <span class="nav-page-text">Cookbook</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>