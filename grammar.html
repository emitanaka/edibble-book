<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Grammar | The Grammar of Experimental Designs</title>
<meta name="author" content="Emi Tanaka">
<meta name="description" content="Grammar makes language expressive. A language consisting of words and no grammar (statement = word) expresses only as many ideas as there are words. By specifying how words are combined in...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 2 Grammar | The Grammar of Experimental Designs">
<meta property="og:type" content="book">
<meta property="og:description" content="Grammar makes language expressive. A language consisting of words and no grammar (statement = word) expresses only as many ideas as there are words. By specifying how words are combined in...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Grammar | The Grammar of Experimental Designs">
<meta name="twitter:description" content="Grammar makes language expressive. A language consisting of words and no grammar (statement = word) expresses only as many ideas as there are words. By specifying how words are combined in...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Fira%20Sans-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Fira%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Alegreya-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<!-- Global Site Tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBRNTDT9WG"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-ZBRNTDT9WG');
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">The Grammar of Experimental Designs</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">The Grammar of Experimental Designs</a></li>
<li><a class="" href="preface.html">Preface</a></li>
<li><a class="" href="basics.html"><span class="header-section-number">1</span> Basics</a></li>
<li><a class="active" href="grammar.html"><span class="header-section-number">2</span> Grammar</a></li>
<li><a class="" href="start.html"><span class="header-section-number">3</span> Getting started</a></li>
<li><a class="" href="management.html"><span class="header-section-number">4</span> Project management</a></li>
<li><a class="" href="cookbook.html"><span class="header-section-number">5</span> Cookbook</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/emitanaka/edibble-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="grammar" class="section level1">
<h1>
<span class="header-section-number">2</span> Grammar<a class="anchor" aria-label="anchor" href="#grammar"><i class="fas fa-link"></i></a>
</h1>
<div class="blockquote">
<p>Grammar makes language expressive. A language consisting of words and no grammar (statement = word) expresses only as many ideas as there are words. By specifying how words are combined in statements, a grammar expands a language’s scope.</p>
<p>– Wilkinson, 2005, The Grammar of Graphics, 2nd edition</p>
</div>
<p>Chapter <a href="basics.html#basics">1</a> described a number of basic terms and concepts in experimental designs. In this chapter, I dissect these basic terms in order to build the “grammar of experimental designs”.
The so-called grammar of experimental designs is a term that is heavily influenced by <span class="citation">Wilkinson (<a href="cookbook.html#ref-Wilkinson2005-oz" role="doc-biblioref">2005</a>)</span>, who use the term “grammar of graphics” to describe an object-oriented system to create unlimited number of plots from following a relatively small number of rules. The grammar of graphics is adopted across many systems (Julia, Python, R, Tableau and so on) with its most popular interpretation <span class="citation">(Wickham <a href="cookbook.html#ref-Wickham2010-kt" role="doc-biblioref">2010</a>)</span> as the <code>ggplot2</code> R-package <span class="citation">(Wickham <a href="cookbook.html#ref-ggplot2" role="doc-biblioref">2016</a>)</span>. An overview of <code>ggplot2</code> is given in Section <a href="#ggplot"><strong>??</strong></a>. The grammar of experimental designs leverage aspects of the grammar of graphics for the visualisation of the experimental designs as discussed more extensively in <a href="#deggust"><strong>??</strong></a>.</p>
<p>Henceforth, “grammar” refers to the grammar of experimental designs unless explicitly stated otherwise.</p>
<div id="fundamental-terminology" class="section level2">
<h2>
<span class="header-section-number">2.1</span> Fundamental terminology<a class="anchor" aria-label="anchor" href="#fundamental-terminology"><i class="fas fa-link"></i></a>
</h2>
<p>Section <a href="basics.html#terminology">1.1</a> describe the basic terminology used in the field of experimental design. We can, however, describe some terms more fundamentally by considering every categorised entity (physical or otherwise) involved in the experiment to be a <strong>factor</strong> in the design. The two primary roles of a factor are <strong>treatments</strong> and <strong>units</strong>; under this categorisation blocks, experimental units and observational units are all just units – the specific role of the unit is determined by the relationship of the factors. For example, if a treatment factor is allocated to a plot factor, then the plot is an experimental unit.</p>
<div class="info callout">
<p>In the grammar, the different types of units (block, cluster group, subject, plot, etc) are all classified as <strong>units</strong>. There are no explicit specification of what is an experimental, observational or blocking units as these can be determined implicitly by the relationship of the factors.</p>
</div>
<p>In the grammar, an intermediate construct of the experimental design is stored as an object that contain two types of directed graphs, <span class="math inline">\(G_F = (V(G_F), E(G_F))\)</span> and <span class="math inline">\(G_L = (V(G_L), E(G_L))\)</span>, where <span class="math inline">\(V(G_F)\)</span> and <span class="math inline">\(V(G_L)\)</span> are sets of vertices and <span class="math inline">\(E(G_F)\)</span> and <span class="math inline">\(E(G_L)\)</span> are sets of edges. We refer <span class="math inline">\(G_F\)</span> and <span class="math inline">\(G_L\)</span> as factor graph and level graph, respectively. In the <strong>factor graph</strong>, every factor is represented as a single vertex. Every factor has a finite number of levels and each of these levels is represented as a single vertex in the <strong>level graph</strong>.</p>
<div class="figure">
<span style="display:block;" id="fig:edibble-fct-graph"></span>
<div id="htmlwidget-3e472bc7543a8d4f0534" style="width:100%;height:200px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-3e472bc7543a8d4f0534">{"x":{"nodes":{"id":[1,2,3,4],"name":["mainplot","subplot","irrigation","fertilizer"],"class":["edbl_unit","edbl_unit","edbl_trt","edbl_trt"],"group":["unit","unit","trt","trt"],"label":["mainplot","subplot","irrigation","fertilizer"],"shape":["circle","circle","diamond","diamond"]},"edges":{"from":[1,3,4],"to":[2,1,2],"alloc":[null,1,2],"type":["nest","allot","allot"],"var_from":["mainplot","irrigation","fertilizer"],"var_to":["subplot","mainplot","subplot"],"arrows.middle.type":["arrow","arrow","arrow"],"dashes":[false,false,false],"arrows":["to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","id":"id"},"manipulation":{"enabled":false},"layout":{"randomSeed":3},"edges":{"id":"id"},"interaction":{"dragNodes":false,"dragView":false,"hover":false,"keyboard":false,"multiselect":false,"navigationButtons":false,"selectable":false,"zoomView":false,"zoomSpeed":1}},"groups":["unit","trt"],"width":"100%","height":"200px","idselection":{"enabled":false},"byselection":{"enabled":false},"main":{"text":"Factor graph for a split plot design","style":"font-weight:bold;text-align:center;"},"submain":{"text":"","style":""},"footer":{"text":"","style":""},"background":"rgba(0, 0, 0, 0)","tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script><p class="caption">
Figure 2.1: A factor graph shows a high order view of the relationship between the factors in the experiment. In the above figure, there are two treatment factors: irrigation and fertilizer. Irrigation treatment is applied to the mainplot and the fertilizer treatment is applied to the subplot. The arrow from mainplot node to the subplot node implies that the subplot is nested in the mainplot. The shape and color of the node correspond to the class of the factor (e.g. unit, treatment).
</p>
</div>
<div class="figure">
<span style="display:block;" id="fig:edibble-lvl-graph"></span>
<div id="htmlwidget-d15facbe8713e15186ee" style="width:100%;height:400px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-d15facbe8713e15186ee">{"x":{"nodes":{"idvar":[1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,4,4],"id":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],"name":["mainplot1","mainplot2","mainplot3","mainplot4","subplot1","subplot2","subplot3","subplot4","subplot5","subplot6","subplot7","subplot8","subplot9","subplot10","subplot11","subplot12","subplot13","subplot14","subplot15","subplot16","rainfed","irrigated","brand-A","brand-B"],"var":["mainplot","mainplot","mainplot","mainplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","irrigation","irrigation","fertilizer","fertilizer"],"label":["mainplot1","mainplot2","mainplot3","mainplot4","subplot1","subplot2","subplot3","subplot4","subplot5","subplot6","subplot7","subplot8","subplot9","subplot10","subplot11","subplot12","subplot13","subplot14","subplot15","subplot16","rainfed","irrigated","brand-A","brand-B"],"group":["mainplot","mainplot","mainplot","mainplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","subplot","irrigation","irrigation","fertilizer","fertilizer"],"shape":["circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","circle","diamond","diamond","diamond","diamond"]},"edges":{"from":[1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,22,21,22,21,23,24,24,23,24,23,23,24,24,24,23,23,23,24,23,24],"to":[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"alloc":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"type":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"lvl_from":["mainplot1","mainplot1","mainplot1","mainplot1","mainplot2","mainplot2","mainplot2","mainplot2","mainplot3","mainplot3","mainplot3","mainplot3","mainplot4","mainplot4","mainplot4","mainplot4","irrigated","rainfed","irrigated","rainfed","brand-A","brand-B","brand-B","brand-A","brand-B","brand-A","brand-A","brand-B","brand-B","brand-B","brand-A","brand-A","brand-A","brand-B","brand-A","brand-B"],"lvl_to":["subplot1","subplot2","subplot3","subplot4","subplot5","subplot6","subplot7","subplot8","subplot9","subplot10","subplot11","subplot12","subplot13","subplot14","subplot15","subplot16","mainplot1","mainplot2","mainplot3","mainplot4","subplot1","subplot2","subplot3","subplot4","subplot5","subplot6","subplot7","subplot8","subplot9","subplot10","subplot11","subplot12","subplot13","subplot14","subplot15","subplot16"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","id":"id"},"manipulation":{"enabled":false},"layout":{"randomSeed":1},"edges":{"id":"id"},"interaction":{"dragNodes":false,"dragView":false,"hover":false,"keyboard":false,"multiselect":false,"navigationButtons":false,"selectable":false,"zoomView":false,"zoomSpeed":1}},"groups":["mainplot","subplot","irrigation","fertilizer"],"width":"100%","height":"400px","idselection":{"enabled":false},"byselection":{"enabled":false},"main":{"text":"Level graph for a split plot design","style":"font-weight:bold;text-align:center;"},"submain":{"text":"","style":""},"footer":{"text":"","style":""},"background":"rgba(0, 0, 0, 0)","tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script><p class="caption">
Figure 2.2: The above figure shows the level graph. The nodes of the same color are the levels of the same factor (e.g. all yellow nodes correspond to the levels of the unit, subplot). The shape of the node correspond to the class of the corresponding factor.
</p>
</div>
<div class="info callout">
<p>All nodes in the factor graph must be explicitly named.</p>
</div>
<p>Table <a href="grammar.html#tab:exam-table">2.1</a> shows an example of an illustrative experiment that tests the exam score on a different exam time allocation for two different subjects. In such an experiment, the observational unit may be specified as the combination of Subject-Student, i.e. an observational unit can only be uniquely identified by using information across multiple factors. <strong>In the grammar, a factor cannot be implicitly assumed from other factors.</strong> This restriction means, for example, that a new factor, like Exam Booklet, which uniquely identifies every Subject-Student combination must be specified in the system. This restriction is not only for the purpose of internal graph representation but forces the user to confront what the observational units actually are. Naming things are hard, but without naming things, it can be hard to create a shared understanding about the experimental structure.</p>
<div class="inline-table"><table class=" lightable-classic" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
<span id="tab:exam-table">Table 2.1: </span>The above table shows the exam time allocation for every subject-student combination.
</caption>
<thead><tr>
<th style="text-align:right;">
Exam Booklet
</th>
<th style="text-align:left;">
Subject
</th>
<th style="text-align:right;">
Student
</th>
<th style="text-align:right;">
Exam Time
</th>
<th style="text-align:right;">
Score
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Math
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Morning
</td>
<td style="text-align:right;">
58
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Science
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Afternoon
</td>
<td style="text-align:right;">
90
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Math
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Afternoon
</td>
<td style="text-align:right;">
39
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Science
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Morning
</td>
<td style="text-align:right;">
80
</td>
</tr>
</tbody>
</table></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">object</th>
<th align="left">class</th>
<th align="left">purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">edibble factor</td>
<td align="left"><code>edbl_fct</code></td>
<td align="left">a factor pertaining to the experimental design</td>
</tr>
<tr class="even">
<td align="left">edibble unit</td>
<td align="left"><code>edbl_unit</code></td>
<td align="left">any entity, except treatment factors, that pertains to the experiment</td>
</tr>
<tr class="odd">
<td align="left">edibble treatment</td>
<td align="left"><code>edbl_trt</code></td>
<td align="left">treatment factor in the experiment such that the factorial combination describes the whole treatment levels</td>
</tr>
<tr class="even">
<td align="left">edibble response</td>
<td align="left"><code>edbl_rcrd</code></td>
<td align="left">the intended response to be measured during the experiment</td>
</tr>
<tr class="odd">
<td align="left">edibble graph</td>
<td align="left"><code>edbl_graph</code></td>
<td align="left">an intermediate construct of the experimental design</td>
</tr>
<tr class="even">
<td align="left">edibble table/data frame</td>
<td align="left"><code>edbl_table</code></td>
<td align="left">a tibble output for experimental design</td>
</tr>
</tbody>
</table></div>
<p>An edibble variable is any variable that is relevant in any aspect of the experiment (not just the design of experiment). An edibble variable can be physical (e.g. person, plot, animal and drug), metaphysical (e.g. gender, time and space) or intended response measures.</p>
<p>There are three main types of edibble variable: an edibble unit (<code>edbl_unit</code>), an edibble treatment factor (<code>edbl_trt</code>), and an edibble record (<code>edbl_rcrd</code>).</p>
<p>Currently, variables are limited to categorical variables.</p>
<p>Every edibble variable comes in two forms:</p>
<ul>
<li>a <strong>vertex form</strong> which contains:
<ul>
<li>
<code>name</code>: variable name,</li>
<li>
<code>class</code>: <code>"edbl_unit"</code>, <code>"edbl_trt"</code>, or <code>"edbl_rcrd"</code>,</li>
<li>
<code>vtype</code>: <code>"var"</code>,</li>
<li>graphical attributes like <code>label</code>, and</li>
<li>connected to child level nodes which contain:
<ul>
<li>
<code>name</code>: level name,</li>
<li>
<code>label</code>: the level name,</li>
<li>
<code>vtype</code>: <code>"level"</code>, and</li>
<li>graphical attributes like <code>label</code>.</li>
</ul>
</li>
</ul>
</li>
<li>a <strong>vector form</strong> which is an integer vector which has classes <code>edbl_var</code>, <code>factor</code> and <code>vctrs_vctr</code> with attributes:
<ul>
<li>
<code>name</code>: variable name,</li>
<li>
<code>class</code>: a character vector containing <code>"edbl_var"</code>, <code>"factor"</code>, and <code>"vctrs_vctr"</code>, and</li>
<li>
<code>levels</code>: a character vector of the level names.</li>
</ul>
</li>
</ul>
<p>The vector format behaves much like a <code>factor</code> except that the output is modified to include the number of levels in tibble output.</p>
</div>
<div id="an-edibble-graph" class="section level2">
<h2>
<span class="header-section-number">2.2</span> An edibble graph<a class="anchor" aria-label="anchor" href="#an-edibble-graph"><i class="fas fa-link"></i></a>
</h2>
<p>An edibble graph, or <code>edbl_graph</code> object, is a special type of directed graph. This form is used to represent intermediate constructs of the experimental design.</p>
<p>In a <strong><em>factor graph</em></strong>:</p>
<ul>
<li>a vertex is a variable,</li>
<li>an edge is a high-level connection between two variables, and</li>
<li>the direction of an edge defines a relationship based on which two variables it is connecting. Say if we have two nodes named A and B with a directed edge starting from A to B, then the meaning of the relationship follows the table below. If the combination is not listed below then the nodes cannot have a direct relationship.</li>
</ul>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">A</th>
<th align="left">B</th>
<th align="left">
<span class="math inline">\(A \rightarrow B\)</span> relationship</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">unit</td>
<td align="left">unit</td>
<td align="left">B is nested in A</td>
</tr>
<tr class="even">
<td align="left">treatment</td>
<td align="left">unit</td>
<td align="left">B is applied to A</td>
</tr>
<tr class="odd">
<td align="left">record</td>
<td align="left">unit</td>
<td align="left">B is measured on A</td>
</tr>
</tbody>
</table></div>
<p>As an example, consider a split-plot design that contains 4 main plots with 2 sub plots within each main plot (so 8 subplots in total). There are 2 treatment factors: fertilizer (with levels A and B) and variety (with levels V1 and V2). Each level of the fertilizer is randomly applied to two main plots. Each level of variety is randomly applied to one sub plot within each main plot. Two responses are planned to be measured on the sub plots: yield and height.</p>
<p>In a <strong><em>level graph</em></strong>:</p>
<ul>
<li>a vertex is a level,</li>
<li>an edge is a direct connection between two levels, and</li>
<li>the direction of an edge defines the same relationship as for high-level view, except if the edge is connecting nodes of levels of the same unit variable then it represents the sequence order of the levels.</li>
</ul>
<p>The whole edibble graph object contains all the nodes and edges from the high- and low-level views. The whole edibble graph can have numerous nodes and edges, even when the number of units are small, that it’s visualisation will be too cluttered to be any useful. Consequently, when visualising these intermediate construct of the experimental design, only a high- or low-level view is visible to the user, but the object contains the information seen in both views.</p>
</div>
<div id="an-edibble-table-or-data-frame" class="section level2">
<h2>
<span class="header-section-number">2.3</span> An edibble table (or data frame)<a class="anchor" aria-label="anchor" href="#an-edibble-table-or-data-frame"><i class="fas fa-link"></i></a>
</h2>
<p>An edibble, or <code>edbl_table</code> object, is a special class of <a href="https://tibble.tidyverse.org/"><code>tibble</code></a>. The word “edibble”
itself already implies that it is a table so appending the word with table or data frame seems superfluous. However, edibble can refer to the package, object, or used as an adjective to other objects, so appending edibble with table or data frame is to make explicit emphasis it refers to the <code>edbl_table</code> object, otherwise the reader is expected to infer its meaning by context.</p>
<p>An <code>edbl_table</code> was originally called <code>edbl_df</code> following convention from tibble but I decided to break away from this since other edibble components are <em>graph</em> and <em>design</em>, so a two letter word felt too short in contrast.</p>
<p>An edibble data frame is produced when the variables can be laid out in a <a href="https://www.jstatsoft.org/article/view/v059i10">tidy data</a> format. An edibble is constructed from two possible ways:</p>
<ol style="list-style-type: decimal">
<li>converting edibble graph to edibble using <code>serve_table</code> and</li>
<li>converting existing data frame to edibble using <code>edibble</code>.</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="basics.html"><span class="header-section-number">1</span> Basics</a></div>
<div class="next"><a href="start.html"><span class="header-section-number">3</span> Getting started</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#grammar"><span class="header-section-number">2</span> Grammar</a></li>
<li><a class="nav-link" href="#fundamental-terminology"><span class="header-section-number">2.1</span> Fundamental terminology</a></li>
<li><a class="nav-link" href="#an-edibble-graph"><span class="header-section-number">2.2</span> An edibble graph</a></li>
<li><a class="nav-link" href="#an-edibble-table-or-data-frame"><span class="header-section-number">2.3</span> An edibble table (or data frame)</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/emitanaka/edibble-book/blob/master/02-grammar.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/emitanaka/edibble-book/edit/master/02-grammar.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>The Grammar of Experimental Designs</strong>" was written by Emi Tanaka. It was last built on 2022-03-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
